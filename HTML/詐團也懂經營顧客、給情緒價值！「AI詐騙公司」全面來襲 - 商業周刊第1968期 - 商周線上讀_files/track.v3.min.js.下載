!function(){var d="ver_20240828";void 0!==window.bindHashChangeFn&&window.bindHashChangeFn,window._utk_stat=window._utk_stat||{},window._utk_clickstat=!0,window._utk_autostat=!0,window._utk_exitstat=!0,window._utk_hashstat=!0,void 0!==window.bindHashChangeFn&&(window._utk_hashstat=window.bindHashChangeFn);let r=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}();try{var e=window.location.href,t=e.indexOf("?"),n=e.substr(t);n.slice(1,n.length).split("&").forEach(function(e){e=e.split("=");e[0],e[1]})}catch(e){}function m(e){function s(e,t){return e<<t|e>>>32-t}function c(e,t){var n=2147483648&e,r=2147483648&t,i=1073741824&e,o=1073741824&t,e=(1073741823&e)+(1073741823&t);return i&o?2147483648^e^n^r:i|o?1073741824&e?3221225472^e^n^r:1073741824^e^n^r:e^n^r}function t(e,t,n,r,i,o,a){return e=c(e,c(c(t&n|~t&r,i),a)),c(s(e,o),t)}function n(e,t,n,r,i,o,a){return e=c(e,c(c(t&r|n&~r,i),a)),c(s(e,o),t)}function r(e,t,n,r,i,o,a){return e=c(e,c(c(t^n^r,i),a)),c(s(e,o),t)}function i(e,t,n,r,i,o,a){return e=c(e,c(c(n^(t|~r),i),a)),c(s(e,o),t)}function o(e){for(var t="",n="",r=0;r<=3;r++)t+=(n="0"+(e>>>8*r&255).toString(16)).substr(n.length-2,2);return t}Array();for(var a,d,l,u,h=function(e){for(var t,n=e.length,r=16*(1+((r=n+8)-r%64)/64),i=Array(r-1),o=0,a=0;a<n;)o=a%4*8,i[t=(a-a%4)/4]=i[t]|e.charCodeAt(a)<<o,a++;return i[t=(a-a%4)/4]=i[t]|128<<(o=a%4*8),i[r-2]=n<<3,i[r-1]=n>>>29,i}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):t=127<r&&r<2048?(t+=String.fromCharCode(r>>6|192))+String.fromCharCode(63&r|128):(t=(t+=String.fromCharCode(r>>12|224))+String.fromCharCode(r>>6&63|128))+String.fromCharCode(63&r|128)}return t}(e)),f=1732584193,g=4023233417,m=2562383102,p=271733878,w=0;w<h.length;w+=16)f=t(a=f,d=g,l=m,u=p,h[w+0],7,3614090360),p=t(p,f,g,m,h[w+1],12,3905402710),m=t(m,p,f,g,h[w+2],17,606105819),g=t(g,m,p,f,h[w+3],22,3250441966),f=t(f,g,m,p,h[w+4],7,4118548399),p=t(p,f,g,m,h[w+5],12,1200080426),m=t(m,p,f,g,h[w+6],17,2821735955),g=t(g,m,p,f,h[w+7],22,4249261313),f=t(f,g,m,p,h[w+8],7,1770035416),p=t(p,f,g,m,h[w+9],12,2336552879),m=t(m,p,f,g,h[w+10],17,4294925233),g=t(g,m,p,f,h[w+11],22,2304563134),f=t(f,g,m,p,h[w+12],7,1804603682),p=t(p,f,g,m,h[w+13],12,4254626195),m=t(m,p,f,g,h[w+14],17,2792965006),f=n(f,g=t(g,m,p,f,h[w+15],22,1236535329),m,p,h[w+1],5,4129170786),p=n(p,f,g,m,h[w+6],9,3225465664),m=n(m,p,f,g,h[w+11],14,643717713),g=n(g,m,p,f,h[w+0],20,3921069994),f=n(f,g,m,p,h[w+5],5,3593408605),p=n(p,f,g,m,h[w+10],9,38016083),m=n(m,p,f,g,h[w+15],14,3634488961),g=n(g,m,p,f,h[w+4],20,3889429448),f=n(f,g,m,p,h[w+9],5,568446438),p=n(p,f,g,m,h[w+14],9,3275163606),m=n(m,p,f,g,h[w+3],14,4107603335),g=n(g,m,p,f,h[w+8],20,1163531501),f=n(f,g,m,p,h[w+13],5,2850285829),p=n(p,f,g,m,h[w+2],9,4243563512),m=n(m,p,f,g,h[w+7],14,1735328473),f=r(f,g=n(g,m,p,f,h[w+12],20,2368359562),m,p,h[w+5],4,4294588738),p=r(p,f,g,m,h[w+8],11,2272392833),m=r(m,p,f,g,h[w+11],16,1839030562),g=r(g,m,p,f,h[w+14],23,4259657740),f=r(f,g,m,p,h[w+1],4,2763975236),p=r(p,f,g,m,h[w+4],11,1272893353),m=r(m,p,f,g,h[w+7],16,4139469664),g=r(g,m,p,f,h[w+10],23,3200236656),f=r(f,g,m,p,h[w+13],4,681279174),p=r(p,f,g,m,h[w+0],11,3936430074),m=r(m,p,f,g,h[w+3],16,3572445317),g=r(g,m,p,f,h[w+6],23,76029189),f=r(f,g,m,p,h[w+9],4,3654602809),p=r(p,f,g,m,h[w+12],11,3873151461),m=r(m,p,f,g,h[w+15],16,530742520),f=i(f,g=r(g,m,p,f,h[w+2],23,3299628645),m,p,h[w+0],6,4096336452),p=i(p,f,g,m,h[w+7],10,1126891415),m=i(m,p,f,g,h[w+14],15,2878612391),g=i(g,m,p,f,h[w+5],21,4237533241),f=i(f,g,m,p,h[w+12],6,1700485571),p=i(p,f,g,m,h[w+3],10,2399980690),m=i(m,p,f,g,h[w+10],15,4293915773),g=i(g,m,p,f,h[w+1],21,2240044497),f=i(f,g,m,p,h[w+8],6,1873313359),p=i(p,f,g,m,h[w+15],10,4264355552),m=i(m,p,f,g,h[w+6],15,2734768916),g=i(g,m,p,f,h[w+13],21,1309151649),f=i(f,g,m,p,h[w+4],6,4149444226),p=i(p,f,g,m,h[w+11],10,3174756917),m=i(m,p,f,g,h[w+2],15,718787259),g=i(g,m,p,f,h[w+9],21,3951481745),f=c(f,a),g=c(g,d),m=c(m,l),p=c(p,u);return(o(f)+o(g)+o(m)+o(p)).toLowerCase()}var p={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,r,i,o,a,s="",c=0;for(e=this._utf8_encode(e+"");c<e.length;)r=(t=e.charCodeAt(c++))>>2,i=(3&t)<<4|(t=e.charCodeAt(c++))>>4,o=(15&t)<<2|(n=e.charCodeAt(c++))>>6,a=63&n,isNaN(t)?o=a=64:isNaN(n)&&(a=64),s=s+this._keyStr.charAt(r)+this._keyStr.charAt(i)+this._keyStr.charAt(o)+this._keyStr.charAt(a);return s},decode:function(e){var t,n,r,i,o,a,s="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)r=this._keyStr.indexOf(e.charAt(c++)),t=(15&(i=this._keyStr.indexOf(e.charAt(c++))))<<4|(o=this._keyStr.indexOf(e.charAt(c++)))>>2,n=(3&o)<<6|(a=this._keyStr.indexOf(e.charAt(c++))),s+=String.fromCharCode(r<<2|i>>4),64!=o&&(s+=String.fromCharCode(t)),64!=a&&(s+=String.fromCharCode(n));return s=this._utf8_decode(s)},encode_urlsafe:function(e){e=this.encode(e);return e=(e=(e=e.replace(/\+/g,"-")).replace(/\//g,"_")).replace(/\=/g,"")},decode_urlsafe:function(e){var t=(e=(e=e.replace(/-/g,"+")).replace(/_/g,"/")).length%4;return t&&(e+="====".substr(0,4-t)),this.decode(e)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t,n="",r=0;r<e.length;r++)(t=e.charCodeAt(r))<128?n+=String.fromCharCode(t):n=127<t&&t<2048?(n+=String.fromCharCode(t>>6|192))+String.fromCharCode(63&t|128):(n=(n+=String.fromCharCode(t>>12|224))+String.fromCharCode(t>>6&63|128))+String.fromCharCode(63&t|128);return n},_utf8_decode:function(e){for(var t,n,r="",i=0,o=0;i<e.length;)(t=e.charCodeAt(i))<128?(r+=String.fromCharCode(t),i++):191<t&&t<224?(o=e.charCodeAt(i+1),r+=String.fromCharCode((31&t)<<6|63&o),i+=2):(o=e.charCodeAt(i+1),n=e.charCodeAt(i+2),r+=String.fromCharCode((15&t)<<12|(63&o)<<6|63&n),i+=3);return r}},a={_toBoolean:function(e){return"false"!==e&&""!==e&&"0"!==e},_toNumber:function(e){return isNaN(this)?e:Number(e)},_toRealValue:function(e){return"true"===e||"false"===e?this._toBoolean(e):this._toNumber(e)},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},trimScript:function(e){return e.replace(/(<|%3c)(.[^>|%3e]*)script(.|\n)*\/script(.[^>|%3e]*)(>|%3e)/gi,"")},sliceAfter:function(e,t){return 0<=e.indexOf(t)?e.substring(e.indexOf(t)+t.length,e.length):""},sliceBefore:function(e,t){return 0<=e.indexOf(t)?e.substring(0,e.indexOf(t)):""},toCamelCase:function(e){return e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})},getQueryValue:function(e){e=new RegExp("(^|&|\\?|#)"+e+"=([^&|\\?]*)(&|\\?|$)",""),e=location.href.match(e);return e?this.trimScript(e[2]):""},parseAttrJSON:function(e){for(var t,n,r={},i=e.split(";"),o=0;o<i.length;o++)""===this.trim(i[o])||i[o].indexOf(":")<1||(t=this.trim(this.sliceBefore(i[o],":")),n=this.trim(this.sliceAfter(i[o],":")),""!==t&&""!==n&&(r[this.toCamelCase(t)]=this._toRealValue(n)));return r}},l=function(t){t=document.cookie.match(new RegExp("(^| )"+t+"=([^;]*)(;|$)",""));if(!t)return"";try{return decodeURIComponent(t[2])}catch(e){return unescape(t[2])}},i=function(e,t,n,r){var i="; path="+((r=r||{}).path||"/"),o="; domain="+(r.domain||v.getRootDomain()),n=n?"; expires="+new Date((new Date).getTime()+86400*n*1e3).toGMTString():"",r=r.secure?"; secure=true":"";e!=cookiePrefix+"srcid"&&(t=escape(t||"")),document.cookie=e+"="+(t||"")+i+o+n+r},o=function(e,t){var n="; path="+((t=t||{}).path||"/"),t="; domain="+(t.domain||v.getRootDomain());document.cookie=e+"="+n+t+"; expires=Thu,01-Jan-70 00:00:01 GMT"},e=function(e,t,n){var r=new Date,n=(r.setTime(r.getTime()+24*n*60*60*1e3),"expires="+r.toGMTString());document.cookie=e+"="+t+"; "+n+";path=/"},c={prefix:cookiePrefix,get:function(e){return l(this.prefix+e)},set:function(e,t,n){i(this.prefix+e,t,n)},del:function(){o(this.prefix+key)}},w={prefix:cookiePrefix,parse:function(e,t){var n,r,i=e.split(t||"&&"),o={};if(""!=e)for(r=0;r<i.length;r++)o[(n=i[r].split("=")).shift()]=n.join("=");return o},stringify:function(e,t){var n,r=[];for(n in e)r.push(n+"="+e[n]);return r.join(t||"&&")},load:function(){return this.parse(JSON.parse(this.parse(document.cookie,"; ")[this.prefix+"utk"]||'""'))},save:function(e){var t=new Date((new Date).getTime()+31536e6).toGMTString();document.cookie=this.prefix+"utk="+JSON.stringify(this.stringify(e))+"; path=/; domain="+v.getRootDomain()+"; expires="+t},get:function(e){return this.load()[e]||""},set:function(e,t){var n=this.load();n[e]=t,this.save(n)},del:function(e){var t=this.load();delete t[e],this.save(t)}},v={param:function(e){var t,n=[];for(t in e)n.push("adid"===t?t+"="+r:t+"="+e[t]);return n.join("&")},isDomain:function(e){return/\./.test(e)&&!/(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})/.test(e)},getRootDomain:function(){var e,t=location.hostname;return this.isDomain(t)?"."+(e=t.split(".")).splice(e.length-3,e.length).join("."):t},getQueryJSON:function(e){var t,n,r,i,o={};if(e)t=(0<=e.indexOf("#")&&e.indexOf("?")>e.indexOf("#")||0<=(e=e.split("#")[0]).indexOf("?")?e.split("?")[1]:e).split("&");else if(0<location.hash.indexOf("?"))t=location.hash.split("?")[1].split("&");else{if(!location.search)return{};t=location.search.substr(1).split("&")}for(n=0;n<t.length;n++)if(1<(i=t[n].split("=")).length){r=i.shift(),i=i.join("=");try{o[r]=decodeURIComponent(i.replace(/\+/g," "))}catch(e){o[r]=i.replace(/\+/g," ")}}return o},getQueryValue:function(e,t){e=e.match(new RegExp("(^|\\?|&|#)("+t+")=([^&#]*)(&|#|$)",""));return e?e[3]:""},trimQueryValue:function(t){try{return decodeURIComponent(t).split(" ")[0].replace(/[\u4e00-\u9fa5]/g,"")}catch(e){return t}},getSE:function(){for(var e=[[1,"百度","baidu.com","word|wd","seo_baidu_0"],[2,"谷歌","google.com","q","seo_google_0"],[3,"谷歌","google.cn","q","seo_google_1"],[4,"搜狗","sogou.com","query","seo_sogou_0"],[6,"雅虎","search.yahoo.com","p","seo_yahoo_0"],[13,"必應","bing.com","q","seo_bing_0"],[14,"神馬","sm.cn","q","seo_sm_0"],[15,"中搜","chinaso.com","q|keys","seo_chinaso_1"],[16,"360","so.com","q","seo_so_1"],[17,"FaceBook","facebook.com","q","seo_facebook_0"]],t=document.referrer,n=0,r=e.length;n<r;n++)if(0<=t.indexOf(e[n][2]))return[e[n][0],e[n][1],this.getQueryValue(t,e[n][3]),e[n][4]];return[0,"","",""]}},_={get:function(){var e=navigator.userAgent.toLocaleLowerCase(),t=e.match(/track_app_version:(\S*)/),n="",t=(t&&(n=t[1]),"function"==typeof UAParser?UAParser(e):{device:{model:"deviceModel",vendor:"deviceBrand"},os:{name:"deviceOsName",version:"deviceOsVersion"}}),r=this.getAPP(e),i=this.getWinSize();return{appName:r.name,appVer:n,deviceId:r.deviceId,pageType:this.getPageType(e),osType:this.getOSType(e),platform:navigator.platform||"",cookieEnabled:navigator.cookieEnabled?1:0,storageEnabled:window.localStorage?1:0,language:navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage||"",screenSize:window.screen.width+"x"+window.screen.height,screenDepth:window.screen.colorDepth,browserSize:i.size,isFullScreen:i.isFull,deviceModel:t.device.model,deviceBrand:t.device.vendor,deviceOsVersion:t.os.name+t.os.version,ssoUserId:window.track_ssoUserId||""}},getPageType:function(e){return/android|iphone|ipod|ipad|ios/.test(e)?"h5":"pc"},getOSType:function(e){e=/android/.test(e)?"android":/iphone|ipod|ipad|ios/.test(e)?"ios":/mac/.test(e)?"mac":/windows/.test(e)?"win":/linux/.test(e)?"linux":"other";return e},getAPP:function(e){var t=l("ul_adid")||l("ule_adid"),n=l("ul_sch")||l("client_type"),r=l("ul_xcx"),i="",o="",a="",s=e.match(/(ios|android)_(ule|ylxd|ylxdsq|yzg|yzgxd|yzs|ylsj|hrysh)_(.[^_]*)_(.[^_|\s]*)/);return s?(i=s[2],o=s[4],(s=e.match(/_deviceid(.[^_]*)_/))&&(a=s[1])):window.YZG_GetLocalVersion?(i="yzgpc",o=YZG_GetLocalVersion()):window.Yzg?(i=Yzg.isYzg?"yzgpad":"yzghd",Yzg.exec&&Yzg.exec("version",function(e){o=e})):/creditcardapp/.test(e)?i="psbcxyk":/psbc/.test(e)?i="psbc":/youlifeapp/.test(e)?i="youlife":/alipayclient/.test(e)?i="alipay":/unionpay/.test(e)?i="unionpay":/xuexi/.test(e)?i="xuexi":"app_huinong"==n?i="huinong":"liantong_fpzn"==t?i="unioncom":(s=e.match(/micromessenger\/(.[^(]*)/))?(i=/miniprogram/.test(e)?"wxmp":"wx",o=s[1]):/toutiaomicroapp/.test(e)?i="ttmp":/(mqqbrowser|qqnews|gdtmobsdk|qq)\//.test(e)&&(i=e.match(/(mqqbrowser|qqnews|gdtmobsdk|qq)\//)[1]),"wxmp"!=i&&"ttmp"!=i||(r&&(n=r.split("|")[0],o=r.split("|")[1]),n&&(i=i+"_"+n.replace("miniwx_","").split("_").join(""),o=o||"1000")),{name:i,ver:o,deviceId:a}},getWinSize:function(){var e=document.documentElement.clientWidth||window.innerWidth,t=document.documentElement.clientHeight||window.innerHeight,n=Math.floor(window.screen.height*e/window.screen.width);return{size:e+"x"+t,isFull:parent.window!=window?2:n-t<40?1:0}},getDocHeight:function(){return document.documentElement.scrollHeight||document.documentElement.offsetHeight||document.body.scrollHeight||document.body.offsetHeight},getScrollHeight:function(){var e=document.documentElement.clientHeight||window.innerHeight;return(document.documentElement.scrollTop||document.body.scrollTop)+e}},b={clone:function(e,t){var n,r={};for(n in e)(t&&0<=t.indexOf(n)||!t)&&(r[n]=e[n]);return r},extend:function(e,t){for(var n in e=e||{},t=t||{})e[n]=t[n];return e},concat:function(e,t){e=this.clone(e);return this.extend(e,t)},random:function(e){for(var t=[0,1,2,3,4,5,6,7,8,9],n=10;1<n;n--){var r=Math.floor(10*Math.random()),i=t[r];t[r]=t[n-1],t[n-1]=i}return((r=Math.pow(10,e)+t.join("")*Math.pow(10,e-10)+(new Date).getTime())+"").substring(1,e+1)},getClientKey:function(){return this.random(16)},getSessionId:function(){return this.random(16)},formatExtend:function(e,t){var n,r=["mer_id","mer_name","req_id","store_id","store_name","cate_id","cate_name","brand_id","brand_name","list_id","list_name","item_id","item_name","item_on","item_price","od_id","od_status","od_amount","share_id","u_mid","u_org","u_id","u_uat","u_uid","u_uid2","u_ul","u_uz","u_mc","s_kw","s_cid","s_cn","s_bid","s_bn","s_aid","s_an","s_pid","s_pn","s_rs","s_rc","rel_type","rel_id1","rel_id2","rel_id3","ex1","ex2","ex3","ex4","ex5","ex6","ex7","ex8","ex9","ex10"].join(","),i={storeId:"store_id",storeName:"store_name",reqId:"req_id",merchantId:"mer_id",merchantName:"mer_name",cateId:"cate_id",cateName:"cate_name",brandId:"brand_id",brandName:"brand_name",listId:"list_id",listingId:"list_id",listName:"list_name",itemId:"item_id",itemName:"item_name",itemOnSale:"item_on",itemPrice:"item_price",salePrice:"item_price",orderId:"od_id",orderAmount:"od_amount",orderStatus:"od_status",shareId:"share_id",loginTime:"u_uat",userId:"u_uid",userId2:"u_uid2",uleUid:"u_uid2",userZone:"u_uz",userLevel:"u_ul",userCookie:"u_mc",merId:"u_mid",orgId:"u_org",usrId:"u_id",keyword:"s_kw",searchKeyword:"s_kw",searchCateId:"s_cid",searchCateName:"s_cn",searchBrandId:"s_bid",searchBrandName:"s_bn",searchAttrId:"s_aid",searchAttrName:"s_an",searchPromoId:"s_pid",searchPromotion:"s_pn",resultState:"s_rs",resultTotal:"s_rc",relateType:"rel_type",relateId:"rel_id1",relateId1:"rel_id1",relateId2:"rel_id2",relateId3:"rel_id3"},o={};for(n in e)0<=r.indexOf(n)?o[n]=e[n]:i[n]&&(o[i[n]]=e[n]);if(t)for(n in t)void 0===o[n]&&(o[n]=t[n]);return o},formatParams:function(e,t,n,r){let i=l("token");var o,a={...t,st:i,ftf:void 0===window.TRACK_TOKEN?i?"1":"0":window.TRACK_TOKEN!=i?"1":"0"},s={},c=[];for(o in n=","+n+",",r=","+r+",",e)0<=n.indexOf(","+o+",")?s[o]=p.encode(e[o]):0<=r.indexOf(","+o+",")?s[o]=p.encode_urlsafe(e[o]):s[o]=encodeURIComponent(e[o]);for(o in a)c.push(o+"="+encodeURIComponent(a[o]));return s.cdata=p.encode(c.join("&")),window.TRACK_TOKEN=i,s}},t=(_utk_stat.appkey=window.site_id||window.app_key,{addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,n)},bindMousedown:function(){function u(e,t,n,r){h.clickData.valid++,h.clickData.lastTime=(new Date).getTime(),e=e.replace(/(^\s*)|(\s*$)/g,""),h.sendEvent("click",e,t+","+n,r),h.blockTime(10)}var h=this;this.addEvent(document,"mousedown",function(e){var t=e.target,n=1,r=e.clientX||0,i=e.clientY||0,o="",a="",s="data-statobj";for(h.clickData.total++;t&&t.tagName&&"body"!=t.tagName.toLowerCase()&&"html"!=t.tagName.toLowerCase()&&n<4;){var c=t.tagName.toLowerCase(),d=t.getAttribute("data-stat");let e="";for(const l of t.attributes)"ta-et"==l.name&&(e=l.value);if(d||e){o=d||e,a=t.getAttribute(s),u(o,r,i,a);break}if(window._utk_autostat){if("a"==c){t.getAttribute("title")?o=t.getAttribute("title"):t.innerText?o=t.innerText:t.innerHTML.match(/(title|alt)='(.*?)'/)?o=t.innerHTML.match(/(title|alt)='(.*?)'/)[2]:0<=t.innerHTML.indexOf("<img")&&(o="未定義alt圖片"),a=t.getAttribute(s),u(o,r,i,a);break}if("button"==c){o=t.innerText,a=t.getAttribute(s),u(o,r,i,a);break}if("input"==c&&("button"==t.type||"submit"==t.type||"reset"==t.type)){o=t.value,a=t.getAttribute(s),u(o,r,i,a);break}}t=t.parentNode,n++}})},bindHashchange:function(){function e(){setTimeout(function(){s.sendPageView(location.href,window._utk_hashdata||{}),window._utk_hashdata=null},100)}window.addEventListener("hashchange",function(){e()});var t=history.pushState;history.pushState=function(){return e(),t.apply(this,arguments)}},bindEvent:function(){(window._utk_clickstat||window._utk_autostat)&&this.bindMousedown(),window._utk_exitstat&&this.bindPageExitStat(),window._utk_hashstat&&this.bindHashchange()},blockTime:function(e){for(var t=(new Date).getTime();(new Date).getTime()-t<e;);},sendEvent:function(e,t,n,r){var i=_.get().pageType;r&&"string"==typeof r&&(r=a.parseAttrJSON(r)),s.sendEvent(1,i,e,t,n,r)},clickData:{logs:[],total:0,valid:0,lastTime:0},bindPageExitStat:function(){function t(){var e="h"+Math.floor(i/o)*o;void 0===r[e]&&(r[e]=0),r[e]+=(new Date).getTime()-s}function e(){var e,t=0,n=0;for(e in r)r[e]>n&&(n=r[e],t=+e.replace("h",""));return{height:t,time:Math.round(n/1e3)}}var n=0,r={},i=0,o=10,a=(new Date).getTime(),s=(new Date).getTime();this.addEvent(window,"scroll",function(){var e=document.documentElement.scrollTop||document.body.scrollTop;n<e&&(n=e),e!=i&&(t(),i=e,s=(new Date).getTime())}),this.addEvent(window,"beforeunload",u.bind(this,n,a,t,e)),window.appPageExitTrack=u.bind(this,n,a,t,e)}});function u(e,t,n,r){var i=this,t=Math.round(((new Date).getTime()-t)/1e3),o=document.documentElement.scrollTop||document.body.scrollTop,a=document.documentElement.clientHeight||window.innerHeight,s=JSON.parse(JSON.stringify(window._utk_stat||{})),n=(n(),r());s.ex1=o+a,s.ex2=e+a,s.ex3=n.height+a,s.ex4=n.time,s.ex5=i.clickData.total,s.ex6=i.clickData.valid,s.ex7=(new Date).getTime()-i.clickData.lastTime<100?1:0,s.ex4>t&&0==e&&(s.ex4=t),i.sendEvent("pageexit","退出頁面",t,s),window.reportReadingDepth(!0),i.blockTime(20)}var n=v.getQueryJSON(),s=new function(){var g="";this.base={},this.user={},this.extend={},this.init=function(){var e=_.get();if(this.base={si:"",ost:e.osType,apn:e.appName,apv:e.appVer,pt:e.pageType,p:e.platform,c:e.cookieEnabled,s:e.storageEnabled,ln:e.language,sr:e.screenSize,sd:e.screenDepth,bs:e.browserSize,fu:e.isFullScreen,tz:(new Date).getTimezoneOffset(),v:d,osv:e.deviceOsVersion,mpb:e.deviceBrand,mpm:e.deviceModel,ssouid:e.ssoUserId},window._utk_timing&&2<_utk_timing.length)try{this.base.lts=_utk_timing[_utk_timing.length-2].getTime()-_utk_timing[0].getTime(),this.base.ltf=_utk_timing[_utk_timing.length-1].getTime()-_utk_timing[0].getTime()}catch(e){}g=e.deviceId},this.setGlobal=function(){var c=this;return new Promise(function(o){let a=user_id||"",s;window.getDeviceId().then(function(e){s=e;let t=window.resource_id||window.article_id||"";var n,e=window.resource_type||window.bw_article_type||"",r=window.t_article_time||"",i=(e&&-1===t.indexOf("-")&&(t=e+"-"+t),{});for(n in i.dw_uid=a,i.ti=s,i.metadata="",i.ri=t,i.rt=e,i.ex8=window.server_id||"",i.ex9=window.server_version||"",c.base.rel_type=window.toc_relType,c.base.atype=e,c.base.atime=r,c.base.v=d,window.external_reference_version&&(c.base.v+="-"+window.external_reference_version),i)null!=typeof i[n]&&(c.extend[n]=i[n]);o()})})},this.setParams=function(e){e.appkey&&(this.base.si=e.appkey,delete e.appkey);e=b.formatExtend(e);this.extend=b.extend(this.extend,e)},this.setVisit=function(e){var e=e||location.href,t=document.title,n="",r=document.referrer,i=v.getQueryValue(e,"refid"),o=w.get("pf"),a=1,s=w.get("uv")||g||b.getClientKey(),c=m(e),d=(new Date).getTime(),l=w.get("utc")||d,u=w.get("utn")||d,h=d-u,f=w.get("pv");f&&(a=0,n=[s,f,u].join("_")),f=[s,c,d].join("_"),w.set("uv",s),w.set("pv",c),w.set("utn",d),w.set("utl",u),w.set("utc",l),this.base.nv=a,this.base.uv=s,this.base.pv=f,this.base.utn=d,this.base.utl=u,this.base.utc=l,this.base.rl=h,i&&(r=p.decode_urlsafe(i)),this.base.cur?this.base.cur!=e&&(this.base.rpv=n,this.base.ref=this.base.cur,this.base.rep=o,this.base.cti=t,this.base.cur=e):(this.base.cti=t,this.base.cur=e,this.base.ref=r,document.referrer&&(this.base.rpv=n,this.base.rep=o)),this.base.dh=_.getDocHeight()},this.getAppTrackData=function(){var e=["uv","pv","utc","fv","fs","ssouid","apn","dw_uid","ti"],t={},n={};if(this.base)for(var r in this.base)e.includes(r)&&(t[r]=this.base[r]);if(this.extend)for(var i in this.extend)e.includes(i)&&(n[i]=this.extend[i]);return v.param(b.formatParams(t,n))},this.setUsession=function(){var e,t,n,r=c.get("usession");r||(e=b.getSessionId(),t=c.get("adid"),n=this.base.ref||"",t?r=e+"|"+t:(r=e+"|wom",n&&0==n.indexOf("http")&&n.indexOf(v.getRootDomain())<0&&(r=e+"|ref_"+p.encode_urlsafe(n)))),0<r.indexOf("|")&&2<=(t=r.split("|")).length&&(this.base.fv=t[0],this.base.fs=t[1]),c.set("usession",r,1/48)},this.setUserInfo=function(){var e=w.get("logininfo"),t=l("mall_cookie");this.user.u_mc=t?1:0,e&&(e=p.decode_urlsafe(e).split("||"),this.user.u_uid=e[0],this.user.u_uat=e[2]||"")},this.setSource=function(){var e=v.getQueryJSON(this.base.cur),t=v.getSE(),n="",r="",i="",n=(this.base.se=t[0],this.base.sn=t[1],this.base.sk=t[2],0<t[0]?""!=t[2]&&(n=t[0]+"_"+p.encode_urlsafe(t[2]),c.set("last_se",n,1)):n=c.get("last_se"),n&&(this.base.lse=n),c.get("site_se")),n=(n&&(this.extend.s_kw=decodeURIComponent(n)),e.adid?r=v.trimQueryValue(e.adid):0<t[0]&&(r=t[3]),r?c.set("adid",encodeURIComponent(r),1):r=c.get("adid"),this.base.adid=r,e.srcid?(i=v.trimQueryValue(e.srcid),c.set("srcid",encodeURIComponent(i))):i=c.get("srcid"),this.base.srcid=i,l("ul_sch")||l("client_type")||""),t=_.get();""==n&&("wx"==t.appName?n="wx_ule":"h5"==t.pageType&&(n="wap")),this.base.adt=n},this.setPageView=function(e){this.setVisit(e),this.setUsession(),this.setUserInfo(),this.setSource()},this.getPageView=function(e,t){return this.base.dh=_.getDocHeight(),this.setPageView(e),this.base.t=(new Date).getTime(),b.extend(this.base,t||{})},this.sendPageView=function(e,t){var n=this,r=(t&&t.keyword&&c.set("site_se",encodeURIComponent(t.keyword),1),this.getPageView(e));this.setGlobal().then(function(){var e=b.concat(n.extend,b.formatExtend(t,n.user)),e=b.formatParams(r,e,"cti","cur,ref");n.loadJS(trackAPIUrl+"?"+v.param(e))})},this.sendOpenRecord=function(e,t){t&&t.keyword&&c.set("site_se",encodeURIComponent(t.keyword),1);e=this.getPageView(e),t=b.concat(this.extend,b.formatExtend(t,this.user)),e=b.formatParams(e,t,"cti","cur,ref");return v.param(e)},this.getEvent=function(e){var t=b.clone(this.base,"si,ost,osv,mpb,mpm,apn,apv,pt,uv,pv,cur,cti,adid,srcid,ln,sd,bs,tz,utc,fv,fs,ssouid");return t.utn=(new Date).getTime(),t.utl=w.get("utn")||t.utn,t.dh=_.getDocHeight(),t.bs=_.getWinSize().size,b.extend(t,e),t.t=(new Date).getTime(),t.rl=t.t-this.base.t,"click"==e.tea&&w.set("pf",e.tev||e.tel||""),t},this.sendEvent=function(e,t,n,r,i,o){var a=this,s=(o&&o.keyword&&c.set("site_se",encodeURIComponent(o.keyword),1),this.getEvent({te:e||1,tec:t||this.base.pt,tea:n||"",tel:r||"",tev:i||""}));this.setGlobal().then(function(){var e=b.concat(a.extend,b.formatExtend(o,a.user)),e=b.formatParams(s,e,"cti","cur,ref");a.loadImg(trackAPIUrl+"?"+v.param(e))})},this.loadJS=function(e){var t=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.src=e,n.setAttribute("async",!0),n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(n.onload=n.onreadystatechange=null,t.removeChild(n))},t&&t.appendChild(n)},this.loadImg=function(e){var t=new Image(1,1);t.id="utrackimg",t.onload=t.onabort=t.onerror=function(){},t.src=e},this.init()},h=(window.getAppTrackData=function(){try{return s.getAppTrackData()}catch(e){return console.log("獲取數據異常！",e),""}},{init:function(e){s.setParams(e)},trackPageview:function(e,t){s.sendPageView(e,t)},trackEvent:function(e,t,n,r,i){s.sendEvent(null,e,t,n,r,i)},trackOpenRecord:function(e,t){return s.sendOpenRecord(e,t)}});function f(){f.prototype.setEvent=function(e,t,n,r,i){var o=_.get().pageType;setTimeout(function(){i&&"string"==typeof i&&(i=a.parseAttrJSON(i)),s.sendEvent(e,o,t,n,r,i)},10)}}function g(){g.prototype.setEvents=function(e,t,n,r,i){var o=_.get().pageType;setTimeout(function(){i&&"string"==typeof i&&(i=a.parseAttrJSON(i)),s.sendEvent(e,o,t,n,r,i)},10)}}s.setGlobal(),s.setParams(window._utk_stat||{}),t.bindEvent(),window._uletrack||n.no_track||("no"!=window._utk_pageview&&h.trackPageview(),window._uletrack=h),e("urlHref",window.location.href,30),window.TrackEvent=f,window.TrackEvents=g}();const OBServer={},elementsArr=new Set,attrsList=["ta-vt","ta-va","ta-vv","ta-ve"];let _showExposureTrackLog=!1;function queryElementsByAttr(e){e=Array.from(document.querySelectorAll(`[${e}]`)).filter(e=>!elementsArr.has(e)&&!e.hasAttribute("ta-observed"));return e.forEach(e=>{elementsArr.add(e)}),e}function handleTrack(r){return function(e){e.forEach(function(e){if(e.isIntersecting){e=e.target;try{var t=["","","","",""],n=e.attributes;for(let e=0;e<n.length;e++)switch(n[e].name){case attrsList[0]:t[0]=n[e].value;break;case attrsList[1]:t[1]=n[e].value;break;case attrsList[2]:t[2]=n[e].value;break;case attrsList[3]:t[3]=n[e].value}(new TrackEvents).setEvents(...t),_showExposureTrackLog&&console.log("[visable exposure] - ",t)}catch(e){console.log("[visable exposure] track error, See: ",e)}finally{OBServer[r]&&OBServer[r].unobserve(e)}}})}}function observeElements(t,e){var n=queryElementsByAttr(t);0<n.length&&(OBServer[t]=OBServer[t]||new IntersectionObserver(e(t)),n.forEach(e=>{e.getAttribute("ta-observed")||(OBServer[t].observe(e),e.setAttribute("ta-observed","true"))}))}function visabledTrack(e=!0){try{e&&elementsArr.clear(),attrsList.forEach(e=>observeElements(e,handleTrack)),console.log(`[visable exposure] size ${elementsArr.size} `)}catch(e){console.log("[visable exposure] init error, See: ",e)}}function observeElementVisibility(n,r){new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(r(),t.unobserve(n))})}).observe(n)}function mutationObserveElement(n,r){new MutationObserver((e,t)=>{e.forEach(e=>{"childList"===e.type&&e.addedNodes.forEach(t=>{"IFRAME"===t.tagName&&(t.onload=function(){let e;try{e=t.contentDocument||t.contentWindow.document}catch(e){console.log("獲取iframe內容失敗, See: ",e)}addClickEvent(e,e=>{try{(new TrackEvents).setEvents(r.trackEvent,"click",...r.getParamFun(n))}catch(e){console.log(`[${r.trackEvent} click] track error, See: `,e)}})})})})}).observe(n,{childList:!0,subtree:!0})}function addClickEvent(e,t,n=!1){e&&(e.addEventListener?e.addEventListener("click",t,n):e.attachEvent("onclick",t,n))}window.onunload=function(){try{for(var e in elementsArr.clear(),OBServer)OBServer[e]&&OBServer[e].disconnect()}catch(e){console.warn(e)}},visabledTrack(),window.$visabledTrack=visabledTrack,window.$clearVbElements=function(){elementsArr.clear()},window.$showVbLog=function(e=!0){return _showExposureTrackLog=e};let collectedArticleInfo={};function reportReadingDepth(i){if(window.bwCollectType&&window.bwCollectType.articleContent){var e=window.bwCollectType.articleContent;const o=window.innerHeight||document.documentElement.clientHeight;e.forEach(r=>{document.querySelectorAll(r.identifier).forEach(e=>{var t,n=e.getBoundingClientRect();n.top<=o&&n.bottom>0-o&&(t=r.getParamFun()[0],collectedArticleInfo[t]||(collectedArticleInfo[t]={percent:[],paragraph:0,totalParagraph:0},articleThreeAndSeven(r,e)),r.readDepth&&readingDepthPercentage(r,n,i),r.sectionIdentifier)&&readingDepthParagraph(r,e,i)})})}}function articleThreeAndSeven(t,e){let n=t.getParamFun()[0];var r=e.querySelector(t.identifier+' div[data-article-imp="2"]'),e=e.querySelector(t.identifier+' div[data-article-imp="3"]');r&&observeElementVisibility(r,()=>{try{(new TrackEvents).setEvents(t.trackEvent,"read_article_3",n)}catch(e){console.log(`[${t.trackEvent} read_article_3] track error, See: `,e)}}),e&&observeElementVisibility(e,()=>{try{(new TrackEvents).setEvents(t.trackEvent,"read_article_7",n)}catch(e){console.log(`[${t.trackEvent} read_article_7] track error, See: `,e)}})}function readingDepthPercentage(t,e,n){var r=(window.innerHeight-e.top)/e.height,i=t.getParamFun()[0];if(n){e=Math.min(Math.max(r,0),1).toFixed(4);try{(new TrackEvents).setEvents(t.trackEvent+"_exit","read",i,e)}catch(e){console.log("[read_article_exit read] track error, See: ",e)}}for(let e=1;e<=Math.ceil(100/t.readDepth);e++){var o=Math.min(e*t.readDepth/100,1);if(o<=r&&(collectedArticleInfo[i].percent=collectedArticleInfo[i].percent||[],!collectedArticleInfo[i].percent.includes(o))){collectedArticleInfo[i].percent.push(o);try{(new TrackEvents).setEvents(t.trackEvent,"read",i,o)}catch(e){console.log(`[${t.trackEvent} read] track error, See: `,e)}}}}function readingDepthParagraph(t,r,e){let i=t.getParamFun()[0];if(0===collectedArticleInfo[i].totalParagraph){let e,n=[];if(((e=r.querySelector(t.sectionIdentifier))?e.querySelectorAll("p, table, ul"):[]).forEach(e=>{var t;"p"===e.tagName.toLowerCase()&&(!(t=e.textContent.trim())||t.startsWith("責任編輯")||t.startsWith("核稿編輯")||t.startsWith("資料來源"))||n.push(e)}),!n.length)return;collectedArticleInfo[i].totalParagraph=n.length;for(let e=0;e<collectedArticleInfo[i].totalParagraph;e++)observeElementVisibility(n[e],function(){if(collectedArticleInfo[i].paragraph=e+1,(e+1)%t.sectionStep==0||e+1===collectedArticleInfo[i].totalParagraph)try{(new TrackEvents).setEvents(t.trackEvent,"read_paragraph",i,e+1,"ex10:"+collectedArticleInfo[i].totalParagraph)}catch(e){console.log(`[${t.trackEvent} read_paragraph] track error, See: `,e)}})}if(collectedArticleInfo.hasOwnProperty(i)&&0<collectedArticleInfo[i].totalParagraph&&e)try{(new TrackEvents).setEvents(t.trackEvent+"_exit","read_paragraph",i,collectedArticleInfo[i].paragraph+1,"ex10:"+collectedArticleInfo[i].totalParagraph)}catch(e){console.log(`[${t.trackEvent} read_paragraph] track error, See: `,e)}}function collectArticleList(){let r=getReportType();window.bwCollectType&&window.bwCollectType.articleList&&window.bwCollectType.articleList.forEach(n=>{document.querySelectorAll(n.listIdentifier).forEach(e=>{r&&!e.hasAttribute("collected")&&(e.setAttribute("collected","true"),observeElementVisibility(e,function(){try{(new TrackEvents).setEvents(n.trackEvent+"_list","exposure")}catch(e){console.log(`[${n.trackEvent}_list exposure] track error, See: `,e)}})),e.querySelectorAll(n.articleIdentifier).forEach(t=>{t.hasAttribute("collected")||(t.setAttribute("collected","true"),"fullReport"===r&&observeElementVisibility(t,function(){try{(new TrackEvents).setEvents(n.trackEvent,"exposure",...n.getParamFun(t))}catch(e){console.log(`[${n.trackEvent} exposure] track error, See: `,e)}}),addClickEvent(t,e=>{try{(new TrackEvents).setEvents(n.trackEvent,"click",...n.getParamFun(t))}catch(e){console.log(`[${n.trackEvent} click] track error, See: `,e)}}))})})})}function collectAd(){window.bwCollectType&&window.bwCollectType.ad&&window.bwCollectType.ad.forEach(n=>{document.querySelectorAll(n.identifier).forEach(t=>{t.hasAttribute("collected")||(t.setAttribute("collected","true"),observeElementVisibility(t,function(){try{(new TrackEvents).setEvents(n.trackEvent,"exposure",...n.getParamFun(t))}catch(e){console.log(`[${n.trackEvent} exposure] track error, See: `,e)}}),mutationObserveElement(t,n),addClickEvent(t,e=>{try{(new TrackEvents).setEvents(n.trackEvent,"click",...n.getParamFun(t))}catch(e){console.log(`[${n.trackEvent} click] track error, See: `,e)}}))})})}function getReportType(){if(window.bwCollectConfig){if(window.bwCollectConfig.fullReport)for(const e of window.bwCollectConfig.fullReport)if(new RegExp("^"+e.replace(/\*/g,".*")).test(window.location.pathname))return"fullReport";if(window.bwCollectConfig.partReport)for(const t of window.bwCollectConfig.partReport)if(new RegExp("^"+t.replace(/\*/g,".*")).test(window.location.pathname))return"partReport"}return null}window.reportReadingDepth=reportReadingDepth;let originalOnload=window.onload||function(){};function handleScroll(){reportReadingDepth(),collectAd(),collectArticleList()}window.onload=function(){originalOnload(),collectAd(),collectArticleList()},document.addEventListener?document.addEventListener("scroll",handleScroll,!0):document.attachEvent("onscroll",handleScroll);